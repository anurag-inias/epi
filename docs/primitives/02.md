# Swap bits

## Description

Given a number $n$ swap the $i^{th}$ and $j^{th}$ bits.

## Example

```
 input = 0b1011
     i = 3
     j = 2
output = 0b0111
```

## Stub

```java
public static long swapBits(long x, int i, int j) {
  // Fill me.
}
```

## Solution

??? "Expand"

    Let $i^{th}$ bit be $a$ and $j^{th}$ bit be $b$

    $$
    x = [\dots a \dots b \dots]
    $$

    now if we have $\phi = a \oplus b$, we can swap $a$ and $b$ like this

    $$
    \begin{align}
    x \oplus [\dots \phi \dots \phi \dots] &= [\dots a \oplus \phi \dots b \oplus \phi \dots] \\
      &= [\dots a \oplus (a \oplus b) \dots b \oplus (a \oplus b) \dots] \\
      &= [\dots b \dots a \dots] \\
    \end{align}
    $$

    ```java
    public static long swapBits(long x, int i, int j) {
      // x = [... a ... b ...]
      long phi = ((x >> i) & 1) ^ ((x >> j) & 1); // a ^ b
      return x ^ (phi << i) ^ (phi << j);
    }
    ```