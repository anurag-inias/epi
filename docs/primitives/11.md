# Generate uniform random numbers

## Description

Given a random bit generator (0 or 1), implement a random number generator for range $[a, b]$.

## Stub

```java
private static int zeroOneRandom() {
  Random gen = new Random();
  return gen.nextInt(2);
}

public static int uniformRandom(int lowerBound, int upperBound) {
  // Fill me.
}
```

## Solution

??? "Expand"

    We find the smallest number $k$ such that the range $[0, 2^k)$ is equal or larger than $[min, max]$.

    The idea then is to call the random bit generator to generate a number in range $[0, 2^k)$. 
    
    - If it's within the desired range $[0, max-min+1]$, it's all good.

    - If it's beyond that range, then try again.

    ```java
    public static int uniformRandom(int lowerBound, int upperBound) {
      int range = upperBound - lowerBound + 1;
      int d = (int) Math.ceil(log2(range));
      int res = randomPow2(d) + lowerBound;
      while (res > upperBound) {
        res = randomPow2(d) + lowerBound;
      }
      return res;
    }

    private static int randomPow2(int d) { 
      int num = 0;
      for (int mask = 0; mask < d; mask++) {
        if (zeroOneRandom() > 0) {
          num |= 1 << mask;
        }
      }
      return num;
    }

    private static double log2(double n) { // (1)
      return Math.log(n) / Math.log(2);
    }
    ```

    1. $\log_c{m} = \dfrac{\log_b{m}}{\log_b{c}}$

