# Closest integer with same weight

## Description

Given a number $x$, find the closest integer $y$ with the same weight. Here, by weight we mean number of set bits. And by closest integer we mean $|x - y$.

## Example

```
 input = 0b1011100
output = 0b1011010

 input = 0b10111
output = 0b11011
```

## Stub

```java
public static long closestIntSameBitCount(long x) {
  // Fill me.
}
```

## Solution

??? "Expand"

    Utilize [bit tricks](https://listless.dev/data-structures/numbers/bit-tricks/). Here are two cases to consider:

    1. Number is like $x = ---- 1000$, then we want $y = ---- 0100$. That is, find the rightmost set bit and move it to the right.
    2. Number is like $x = ---- 0111$, then we want $y = ---- 1011$. That is, find the rightmost unset bit and move it to the right.

    ```java
    public static long closestIntSameBitCount(long x) {
      long rightmost1mask = x & -x;
      long rightmost0mask = ~x & (x + 1);

      if (rightmost1mask > 1) {
        return (x ^ rightmost1mask) | (rightmost1mask >>> 1);
      }
      return (x ^ (rightmost0mask >>> 1)) | rightmost0mask;
    }
    ```
